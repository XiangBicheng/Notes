# 6.1 函数基础

## 1. 局部对象

- 在C++语言中，名字有作用域，对象有生命周期：

  - 名字的作用域是程序文本的一部分，名字在其中可见。
  - 对象的生命周期是程序执行过程中该对象存在的一段时间。

- 定义在块内部的变量统称为局部变量**(local variable)**，局部变量一般是自动变量**(automatic object)**。当函数的控制路径经过变量定义语句时自动创建该对象，当到达定义所在的块末尾时销毁它。有些时候，有必要令局部变量的生命周期贯穿函数调用及之后的时间，如统计某个函数的被调用次数，可以将局部变量定义成static类型从而获得这样的对象，称为**局部静态对象(local static object)**。

  **注意，局部静态对象只会初始化一次，尽管其生命周期延长了，但作用域仅限于函数体内部。**

## 2. 函数声明

- 和其他名字一样，函数的名字也必须在使用之前声明。类似于变量，函数只能定义一次，但可以声明多次。声明函数时，无需函数体，也无需形参的名字(但通常会加上)。函数声明也称**函数原型(function prototype)**。
- 建议将函数声明放在头文件中，这样能确保所有的函数声明保持一致，而且一旦我们想改变函数的接口，只需改变一条声明即可。定义函数的源文件应该把含有函数声明的头文件包含进来。

## 3. 分离式编译

### 3.1 Linux下：

- 可以直接生成单一的可执行文件：

  ```shell
  g++ factMain.cpp fact.cpp -o fact
  ```

- 也可以先生成多个对象代码(object code)文件，然后再将它们链接到一起：

  ```shell
  g++ -c factMain.cpp
  g++ -c fact.cpp
  g++ factMain.o fact.o -o fact
  ```

  这种方法的好处在于，如果你只改动了某个源代码文件，你只需要重新编译生成它的对象代码文件，再与原来已经编译好的其他对象文件链接起来即可。

### 3.2 Windows下：

- 找到visual studio解决方案面板中的`Header Files`，右键`Add-->New Item`，选择`Header File(.h)`类型。

- 找到visual studio解决方案面板中的`Source Files`，右键`Add-->New Item`，选择`C++ File(.cpp)`类型。

  **注意：每个.cpp文件中都要添加`#include "stdafx.h"`这一行，**

